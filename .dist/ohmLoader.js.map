{"version":3,"sources":["ohmLoader.js"],"names":[],"mappings":";;;;;QAGgB;QAcA;QAWA;;AA5BhB;;;;AACA;;;;;;AAEO,SAAS,wBAAT,CAAkC,WAAlC,EAA+C,gBAAgB,EAAhB,EAAoB,WAAW,CAAC,UAAD,GAAa,WAAb,EAAyB,IAAzB,CAAX,EAA2C;AACnH,QAAM,UAAU,gBAAI,QAAJ,CAAa,aAAG,YAAH,CAAgB,QAAhB,CAAb,EAAwC,WAAxC,CAAV;QACA,YAAY,QAAQ,SAAR,EAAZ,CAF6G;;AAInH,gBAAc,OAAd,CAAsB,eAAtB,EAJmH;;AAMnH,SAAO,EAAC,OAAD,EAAU,SAAV,EAAP,CANmH;;AAQnH,WAAS,eAAT,CAAyB,IAAzB,EAA+B;AAC7B,UAAM,IAAI,QAAQ,CAAC,UAAD,GAAa,WAAb,EAAyB,CAAzB,GAA4B,IAA5B,EAAiC,UAAjC,CAAR,EAAsD,OAAtD,CADmB;AAE7B,cAAU,YAAV,CAAuB,IAAvB,EAA6B,CAA7B,EAF6B;GAA/B;CARK;;AAcA,SAAS,GAAT,CAAa,KAAb,EAAoB,OAApB,EAA6B,SAA7B,EAAwC,SAAxC,EAAmD;AACxD,QAAM,QAAQ,QAAQ,KAAR,CAAc,KAAd,CAAR,CADkD;AAExD,MAAI,MAAM,SAAN,EAAJ,EAAuB;AACrB,UAAM,SAAS,UAAU,KAAV,EAAiB,QAAjB,EAAT,CADe;AAErB,WAAO,MAAP,CAFqB;GAAvB,MAIK;AACH,YAAQ,KAAR,CAAc,MAAM,OAAN,CAAd,CADG;GAJL;CAFK;;AAWA,SAAS,WAAT,CAAqB,SAArB,EAAgC,OAAhC,EAAyC,SAAzC,EAAoD,SAApD,EAA+D;AACpE,SAAO,IAAI,aAAG,YAAH,CAAgB,SAAhB,EAA2B,QAA3B,EAAJ,EAA2C,OAA3C,EAAoD,SAApD,EAA+D,SAA/D,CAAP,CADoE;CAA/D","file":"ohmLoader.js","sourcesContent":["import fs from 'fs';\nimport ohm from 'ohm-js';\n\nexport function loadGrammarWithSemantics(grammarName, semanticNames = [], fileName = `./grammar/${grammarName}.ohm`) {\n  const grammar = ohm.grammars(fs.readFileSync(fileName))[grammarName],\n        semantics = grammar.semantics();\n\n  semanticNames.forEach(addSemanticName);\n\n  return {grammar, semantics};\n\n  function addSemanticName(name) {\n    const s = require(`./grammar/${grammarName}.${name}.semantics`).default;\n    semantics.addOperation(name, s);\n  }\n}\n\nexport function run(model, grammar, semantics, operation) {\n  const match = grammar.match(model);\n  if (match.succeeded()) {\n    const result = semantics(match).toObject();\n    return result;\n  }\n  else {\n    console.error(match.message);\n  }\n}\n\nexport function runFromFile(modelFile, grammar, semantics, operation) {\n  return run(fs.readFileSync(modelFile).toString(), grammar, semantics, operation);\n}"],"sourceRoot":"/source/"}